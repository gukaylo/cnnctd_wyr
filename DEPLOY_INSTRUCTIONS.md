# Инструкции по деплою и обновлению в GitHub

## Проблема с Xcode лицензией

Если вы видите ошибку о лицензии Xcode, выполните:

```bash
sudo xcodebuild -license
```

Примите лицензию, затем выполните команды ниже.

## Обновление в GitHub

### Вариант 1: Использовать готовый скрипт

```bash
# После принятия лицензии Xcode
./COMMIT_AND_PUSH.sh
```

или

```bash
python3 git_push.py
```

### Вариант 2: Выполнить вручную

```bash
# 1. Добавить изменения
git add main.py README.md requirements.txt deploy.sh COMMIT_AND_PUSH.sh git_push.py

# 2. Создать коммит
git commit -m "Обновление бота: исправлена логика таймера, добавлена загрузка токена из .env, обновлена документация"

# 3. Проверить/добавить remote
git remote -v
# Если нет origin, добавить:
git remote add origin https://github.com/gukaylo/cnnctd_wyr.git

# 4. Отправить изменения
git push -u origin main
# или если ветка называется master:
git push -u origin master
```

## Проверка готовности к деплою

Перед деплоем убедитесь:

1. ✅ Создан файл `.env` с `BOT_TOKEN=ваш_токен`
2. ✅ Установлены зависимости: `pip install -r requirements.txt`
3. ✅ Код обновлен и соответствует требованиям

Запустите проверку:
```bash
./deploy.sh
```

## Что было обновлено

- ✅ Исправлена логика таймера (20 секунд, предупреждение показывается при 2+ голосах)
- ✅ Добавлена загрузка токена из `.env` файла
- ✅ Обновлен README.md (соответствует реальному коду)
- ✅ Удален неиспользуемый `aiogram` из requirements.txt
- ✅ Все изменения обновляются в одном сообщении

## После деплоя

1. Убедитесь, что на сервере создан `.env` файл с правильным токеном
2. Запустите бота: `python main.py`
3. Проверьте работу команд `/start` и `/wyr`

